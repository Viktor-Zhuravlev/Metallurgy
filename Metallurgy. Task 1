{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Metallurgy. Task 1. Металлургия. Задание 1."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "An employee of the product quality assessment service noticed that the number of defective steel sheets in the batch for steel grade `A` is greater than for steel grade `B`. He also drew attention to the fact that with an average rolling speed of more than 4 m/s, the number of defective sheets is greater. In accordance with these observations, it is proposed to reduce the rolling speed and introduce additional quality control measures for `A` grade steel.\n",
    "Check:\n",
    "\n",
    "    1) More than 3 defective sheets per batch come out significantly more often for steel grade `A` than for steel grade `B`.\n",
    "    2) At rolling speeds of more than 4 m/s, more than 3 defective steel sheets per batch come out significantly more often than at lower rolling speeds.\n",
    "    \n",
    "The data required for analysis is contained in the \"Statistics for 2018\" file. The number of steel sheets in each batch is assumed to be the same."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Сотрудник службы оценки качества продукции заметил, что число бракованных листов стали в партии для стали марки `A` больше, чем для стали марки `B`. Также он обратил внимание, что при средней скорости прокатки более 4 м/с число бракованных листов больше. В соответствии с этими наблюдениями, предлагается снизить скорость прокатки и ввести дополнительные меры контроля качества для стали марки `A`.\n",
    "Обоснуйте, что:\n",
    "\n",
    "    1)\tБолее 3 бракованных листов на партию выходит значимо чаще для стали марки `А`, чем для стали марки `B`.\n",
    "    2)\tПри скоростях прокатки более 4 м/с свыше 3 бракованных листов стали на партию выходит значимо чаще, чем при меньших скоростях прокатки.\n",
    "\n",
    "Данные, необходимые для анализа, содержатся в файле «Статистика за 2018 год». Количество листов стали в каждой партии предполагается одинаковым."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Libs import. Импорт библиотек"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "import pandas as pd\n",
    "from IPython.display import display\n",
    "import matplotlib as mpl\n",
    "import matplotlib.pyplot as plt\n",
    "import seaborn as sns\n",
    "import math\n",
    "import numpy as np\n",
    "from scipy import stats as st\n",
    "from scipy.stats import kurtosis\n",
    "from scipy.stats import skew"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Cell scrolling is off. Вспомогательный модуль для устранения скроллинга ячеек"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/javascript": [
       "IPython.OutputArea.prototype._should_scroll = function(lines) {\n",
       "    return false;\n",
       "}\n"
      ],
      "text/plain": [
       "<IPython.core.display.Javascript object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "%%javascript\n",
    "IPython.OutputArea.prototype._should_scroll = function(lines) {\n",
    "    return false;\n",
    "}"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Data loading. EDA. Загрузка и изучение файла"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Число бракованных листов</th>\n",
       "      <th>Скорость прокатки</th>\n",
       "      <th>Марка стали</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>3</td>\n",
       "      <td>3.8</td>\n",
       "      <td>A</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>3</td>\n",
       "      <td>3.8</td>\n",
       "      <td>B</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>3</td>\n",
       "      <td>4.8</td>\n",
       "      <td>B</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>4</td>\n",
       "      <td>4.4</td>\n",
       "      <td>B</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>6</td>\n",
       "      <td>5.0</td>\n",
       "      <td>B</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   Число бракованных листов  Скорость прокатки Марка стали\n",
       "0                         3                3.8           A\n",
       "1                         3                3.8           B\n",
       "2                         3                4.8           B\n",
       "3                         4                4.4           B\n",
       "4                         6                5.0           B"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<class 'pandas.core.frame.DataFrame'>\n",
      "RangeIndex: 237 entries, 0 to 236\n",
      "Data columns (total 3 columns):\n",
      " #   Column                    Non-Null Count  Dtype  \n",
      "---  ------                    --------------  -----  \n",
      " 0   Число бракованных листов  237 non-null    int64  \n",
      " 1   Скорость прокатки         237 non-null    float64\n",
      " 2   Марка стали               237 non-null    object \n",
      "dtypes: float64(1), int64(1), object(1)\n",
      "memory usage: 5.7+ KB\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Число бракованных листов</th>\n",
       "      <th>Скорость прокатки</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>count</th>\n",
       "      <td>237.000000</td>\n",
       "      <td>237.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>mean</th>\n",
       "      <td>3.257384</td>\n",
       "      <td>4.509705</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>std</th>\n",
       "      <td>1.807821</td>\n",
       "      <td>0.696260</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>min</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>2.500000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25%</th>\n",
       "      <td>2.000000</td>\n",
       "      <td>4.100000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>50%</th>\n",
       "      <td>3.000000</td>\n",
       "      <td>4.600000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>75%</th>\n",
       "      <td>4.000000</td>\n",
       "      <td>5.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>max</th>\n",
       "      <td>8.000000</td>\n",
       "      <td>6.500000</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "       Число бракованных листов  Скорость прокатки\n",
       "count                237.000000         237.000000\n",
       "mean                   3.257384           4.509705\n",
       "std                    1.807821           0.696260\n",
       "min                    0.000000           2.500000\n",
       "25%                    2.000000           4.100000\n",
       "50%                    3.000000           4.600000\n",
       "75%                    4.000000           5.000000\n",
       "max                    8.000000           6.500000"
      ]
     },
     "execution_count": 3,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data = pd.read_csv('F:/Metallurgy/Task1/Статистика за 2018 год.csv', encoding='cp1251')\n",
    "display(data.head())\n",
    "data.info()\n",
    "data.describe()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Data has been loaded. No missing values were found. Columns: `Num of defected sheets`, `Rolling speed`, `Steel grade`"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Выполнена загрузка данных. Пропусков не обнаружено."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Hypothesis testing as item 1. Проверка гипотезы по пункту 1."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "In this task, it is necessary to justify that more than 3 defective sheets per batch come out significantly more often for steel grade `A` than for steel grade `B`.\n",
    "\n",
    "To test the null and alternative hypotheses $Н_0: р_1 = р_2;Н_1: р_1 ≠ р_2$, we will use the test $\\chi^2$-statistics."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "В данном задании необходимо обосновать, что более 3 бракованных листов на партию выходит значимо чаще для стали марки `А`, чем для стали марки `B`.\n",
    "\n",
    "Чтобы проверить нулевую и альтернативные гипотезы $Н_0: р_1 = р_2;Н_1: р_1 ≠ р_2$ используем тестовую $\\chi^2$-статистику."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Adding a column with the check `more than 3 deffected sheets per batch`. Добавление столбца с проверкой `больше 3-х листов брака на партию`."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Число бракованных листов</th>\n",
       "      <th>Скорость прокатки</th>\n",
       "      <th>Марка стали</th>\n",
       "      <th>Deffected</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>3</td>\n",
       "      <td>3.8</td>\n",
       "      <td>A</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>3</td>\n",
       "      <td>3.8</td>\n",
       "      <td>B</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>3</td>\n",
       "      <td>4.8</td>\n",
       "      <td>B</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>4</td>\n",
       "      <td>4.4</td>\n",
       "      <td>B</td>\n",
       "      <td>True</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>6</td>\n",
       "      <td>5.0</td>\n",
       "      <td>B</td>\n",
       "      <td>True</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   Число бракованных листов  Скорость прокатки Марка стали  Deffected\n",
       "0                         3                3.8           A      False\n",
       "1                         3                3.8           B      False\n",
       "2                         3                4.8           B      False\n",
       "3                         4                4.4           B       True\n",
       "4                         6                5.0           B       True"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "data['Deffected'] = data['Число бракованных листов'] > 3\n",
    "display(data.head())"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Cross tabulation. Таблица перекрестной классификации"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th>Марка стали</th>\n",
       "      <th>A</th>\n",
       "      <th>B</th>\n",
       "      <th>Total</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Deffected</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>False</th>\n",
       "      <td>86</td>\n",
       "      <td>54</td>\n",
       "      <td>140</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>True</th>\n",
       "      <td>53</td>\n",
       "      <td>44</td>\n",
       "      <td>97</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Total</th>\n",
       "      <td>139</td>\n",
       "      <td>98</td>\n",
       "      <td>237</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "Марка стали    A   B  Total\n",
       "Deffected                  \n",
       "False         86  54    140\n",
       "True          53  44     97\n",
       "Total        139  98    237"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<class 'pandas.core.frame.DataFrame'>\n",
      "Index: 3 entries, False to Total\n",
      "Data columns (total 3 columns):\n",
      " #   Column  Non-Null Count  Dtype\n",
      "---  ------  --------------  -----\n",
      " 0   A       3 non-null      int64\n",
      " 1   B       3 non-null      int64\n",
      " 2   Total   3 non-null      int64\n",
      "dtypes: int64(3)\n",
      "memory usage: 96.0+ bytes\n"
     ]
    },
    {
     "data": {
      "image/png": "iVBORw0KGgoAAAANSUhEUgAAAhIAAAEnCAYAAAD8Yqo8AAAAOXRFWHRTb2Z0d2FyZQBNYXRwbG90bGliIHZlcnNpb24zLjMuMiwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy8vihELAAAACXBIWXMAAAsTAAALEwEAmpwYAAAnfElEQVR4nO3debhdZXmw8fshiSQSRIZEkaAHLYiIGjUglGpBRkegCohUQalY6/DROnwOrUSFggNoRaGCMimjKErFCRCk0iIkIVgZm0+iBAKEBEEkQALP98e7drKys885+6ycc3Zycv+ua1/nrHet/a5nzc9617AjM5EkSWpig14HIEmS1l0mEpIkqTETCUmS1JiJhCRJasxEQpIkNWYiIUlSD0XxzIgY1+tYmjCRkCRplEXEyyPi3IhYADwBPAjs1eOwGhk0kYiImRGR1eepiHgwIm6IiOMi4tltw/ZVw71x5EJed0TERhFxQUQsrubLEUP47hur7/QNxzgj4j0RcWdELI+Iq4dS5yDjO3go09VFfZOHOq861LF7VceOwxXXIOObWm0nfaMxvqHGMRrzIyLOqu0n6p/5IzVOaV0VEXsB1wKbAO8BdgVeAfyil3E1Nb7L4R4C9qv+34Qywe8DjoqI/TJzdtVvIWWG3DasUa673ge8CXgncDfw/3oxzirhOxX4GvBdSuY7XA4GtgDOGsY61zVTgWOAq4H5a2Eccyjb5Uivf7cB76p1fxDYbYTHKa1TImJD4HTgEuBvcwy8FbLbRGJ5Zl5X6/5ZRJwKXANcGBEvzMwnM/Nx4LrOVQy/iJiUmUtHa3wNbA/cnpnf6+U4I+KvgHHAGZn5m1GMRWuoumY6LjOfaFpHZj7MyG+XATxS309ExFtHeJzSumhPYCvg6LGQRACQmQN+gJnAA/302w9IYL+qu6/qfmNtmHcCvwKWUM6ErwJmdKjrA8BdwJ+BH1BmdgK714ZJ4J+ArwCLgHlV+RuAy4H7gdZOc59O0wG8CpgFLK3i2oZyJvcD4BHgVuC1XcyXLYCzgcXAo5SzwBm1/vOreFd8BqgrqvjuB/4EnAO8vfpeX224icAXqvn0OHAT8PqBxlnV2152RDf11ep9D/A/wGPAfcDFlJapszqNr/a9/at5/RhwbzWuCW11vwW4o1oe1wAz6jEOMM8+AcyrxfRT4NlVv91b6w6lBeYR4HfAP3So56+AX1bLcDHlTGHjtmGeC1xAWYcfBX4GvLBtnV9tWQMTgC8Bf6jm7z2Us5CnDTBdZ1Xz7ADgZmAZ8GpgS+CMajqWVvPs2FZdg8TRmh871sbzdOCr1XJ5DLiBtm1mKB/gfOC6trIvAfPbyq4Gzmoru47Vt/UPVzE9VC3f/wD+okNdq00zMK3W/2LgKMq2sRS4DNiqrZ4TKOv3I8AC4NzWutRh23pbW/lHq/Kr2/Y1Cfy0bdhnA8tZfbsedPz9zPNJlG3q99X6dSdwfK3/uCqW1vp3M/D2DvUcXI3/ccq+4DhgfNu609/nrPr+tUPdszos737HV/U/oqp7cq3s4vo8rsoeAz7SVjbgPqfbOCnbYfv4LqRt3wRsVg27EHiqNl++NMBy+whl+z2hWmZLq/Hv22H9Hs71t75vfiXlWFMvG/Q42t9nTW+2vIqyYewywDB9lAPjQZSD4wLgmoh4fmuAiDgQOBm4FDgQ+A3wrX7q+yhlp/oO4ENV2TaUHc07KAem/wJ+EhHtzapPB04DvgwcSjlAfJuyE/wV8DeUywHfjYinDzjlJfHYl7JSHEK53+SqiPiLqv+BwI8pzb27Vp/+fAj4dBXbWykrzBc6DHcxZSP7V8rlixuASyNi+gDj/Cbw/qr/YVXZZV3WR0T8M/ANysH2AMqlk4eAycDnKOvAjW3jIyIOBr4PXA+8GfgMZYM4vlb3Kygb502UeX8pcNEA86n1vXcCnwROoiyD91GSio3aBj29qvtAykb59YjYuVbPbsCVlB3OW4GjgdcDZ9aG2YyybrwQ+HvKTnAj4IqImETZgRxWDf5+Vl3Wn6j6/Quwd1X/Q5Qd/ED6KMv/+CqeOymJ6xJKIr0f8EXKZYSTq+8MFEcnp1ffP44yf+4CLqtar5rYkHJgGJKI+BtK8thuGuVS3P6URHYccG1EbNI23FWsnNbW5/5a/10pl1j+CTgSeCll262bStkG3kBZRs8HftHhDvo/suqlG6ruBzvEvxR4TURMq5UdTtlBt+t2/CtERAA/pKz7X6esJ8dQ1pOWzwKfouxX3ky5Jn9uRBxaq2cfyjY4hzKvT6bs075WDdK6LFZfn46tdX+uvxj7iXuw8TXWzT5nDep+JWUf1e7Ealwfp1zG25WyPxnIRsC2lO30pKrePwA/6rD9Def625qWF1COExdk5sxar26Po6vrIuudST8tElX/hcCp1f99tLVItA27AeVyym3Ap2vlNwCXtQ17Cp1bJG4cJN7WOH5GacpvP0v461rZP1Rl9Vh2qMpeN8A49utQ10aUVpJvtGW1swaJdxzlTPXUtvLLqZ25sLKF5q/bhrsG+O5A46TzGemg9QHPpJyBnzRA/J3OFIJylnRmW/m7KTvYzavui4BbgKgN8ykGaZGg7HS+N0D/1vR+tlY2oVo+J9TK/hO4qu27r63PK8qOcjGwWW2YTSkJwfur7h3b19Wq/EfAiYNtY23fOauqa/ogw42nJOaPsbJVor84Vln+wIsoZ0+Ht203vwV+NpR4a9+/GviPtrIBWySqdf9WSvK5Wtxt28gkyhnUO9vquniQmJYBz6uV7UatFbWfcW1VDfOaWvl8ysnNn4Gtq7JdWdnKdHVt2JmU1s+LgE/Wym+jHPRXbNfdjr/DcPtWw7y5n/6bVbEe01b+Y8qlz1b3dR22gY8BT1K17LT167ht0v2Z/qDjo0GLBN3vc7qN86y2ZXp5bT09olZ+M/DvbXXNZ+AWiZlVPQNufyOw/s6kJB3zKCdt4waIseNxtL/PcDz+GQP2jHhRRFwSEfdRVpZllLO77ar+44Dp1YTVtXe3XNZeEBHTIuLsiLib0kKyDNinNY6aJygHj5Z51d9fdCjbaoDJ2hlYlJm/bBVk5p8pB46hntFtTWlh+WFb+ffbuveiZLrXRsT41odyRt3pjG4w3dS3K2UHfmY/dfRnO0prz0Vtdf+Ccjml9fTAzsClWa25lfbp7mQu8PqI+ExE7DzAmdvPW/9k5jLgfylnulQtTrt2iPFXlPXnldVX96LsRB6uDfMnYDaDz/e5wBER8bGIeGl1FtmNuzNzbr0giqMj4paIWFrFeC6lJeC5XdbbshNlu/1uqyAzn6q6m7ZITGXVloBuvIuSlH25vUdE7BIRl0fEYso2/SilFax9mx7MnMz8fasjM6+t4qy3TL0uIv4rIh6qxrWg6tU+rgcpZ2zvrMV/DmW/1skZlIMiEfGXwMbU1skG4697LbAkM/vbT+5IaYH9blv5hcB21RM+4yg3zncaZgMGbtHqqL4tVdtKvd+wj6+m233OoHF2mKa9KNvFzA695wN7RcSLI2LCYHW16Wb7G871dzLl+Lkl5SbPVdbbIRxHV7NGiURETAQ2p1zD7NS/teFsTWmaeTVlJ3YTZeECTKFkPovavt7e3bLKuCJiA0rS8ZeUywN7VOP4SW0cLX+qFlhL6wa2P7YKcuVNbe3frduyPY5abJsN8L1OWo/Qtu+E27u3qIZd1vaZSZm/Q9VNfZtXfxc2qBvK2U+97jur8lb9z2bw6e7kDMqljYOBXwP3RcTn+mmKrnuClct1U0r2fkpbjI9TWi9aMW5BuXTVPp/2YPD5fizlDPQfKOv8XRHxf7qYvk7r1tGUZtRLKE3CO7PyktVA62onW1JujHy0w3ifXt1V3rUqQdqGcv9Gt9+ZSFnXPks5c673ey5lvxHAeylnYTtR1o2hTmun9el+yjwgInai7D8WUJp0d2XlpdpO4zqDkhxuRFkvzhpg3D8HJlXN1e+mQ9LRYPwtmzPwdrll9bd9XWp1b0pZtycMMMxQ92Wbs/p28spa/+EeX123+5xu4lyhWrdPAE7OzAUdBvknyn7mt5T9yzLgeYPEupzut7/hXH8/SEkun6Dck7jCEI+jqxlK9tTJHlUd/91P/10pZ4B7Z+aKR0LbrnMuoszYKW3fbe9uybbuvwBeTrkU8dPaOCYNGn1zCylnYO2eRbmOPRSt62nt9bV3L6Hcv3HAEOvvTzf1La7+bklpqh1K3VCuT97YoX9r476Xwad7NVUy+GXgyxGxNeXegOMo0/PvXcb4R1bejPrjDv3vqf4uoWxgna4F/2mQOB+jbJSfjohtKfdYfCUibq+vq52+2qHsIMolp0+1CiJih4HGP4CFwOSIeHrbzuxZwKNZnr4aih0oO5ubh/CdD1GanE9n9da//Sg7vP2rlj6qM70mB5pO69NUVh6ED6Tsgw5ptYxFxEAHgisorUBfAW7OzNv6a2jKzKci4hzKTvv1lB3ztm2DDXX8LYtZmSx00pq+qazcjqEsYyjr9RLKga99HtWHGYqHWP2FSufU/n9gmMdX1+0+BwaPs+4g4AWUe5xWk5m3R8SRlEsj76EkFP21ErXcR/fb33Cuv/dTLom9DvhqRFycmXdU/dboONq4RSIingl8nnIp4Ip+BmsFsWLGVE18fa3uqnllLuUsq+7NXYbSaRzPY2SfX/81MDUiXlMb59MpN7v8aoh13UU5oLZPf/uNPVdSzuAfycxZ7Z8hjrPb+v6bsrM/fIB66mf5LbdTDup9nerOzNaO7QbgzW1N/p1uaOpXZt6VmSdQ1sOuD6zVAeo6ytMXnWJsJRJXAi+mHDTah7m9Ng9ggMw9M/+XclPZ40OJs2YSq9/MeFhbdzetaVDme1JuMAVWnHm9laGvv1Bu1E3KzVnd2JRyc9o/V5ec2k2i3MOxvFZ2MM1OfF5RtXAAK26wnUq5Ia81rmVtl9fa5+sKVRJ7NvB3dHfJ70yqpxRq60vdkMZfcyWwWfT/8r/fUi4HHdRWfjBwR2Yuqva9s/sZ5in6P0Hsz/IO+5EVB8oRGF9dt/ucQeOsGU9pVTwhMx/sNNKqFfSbwEWZeVZV12CParcur3ez/Q3n+vutqlXlm5Rj2Gm1fe8aHUe73TDHR0SruWRjSjPQ+yhnDfu1X2upuY7ySMrpEfEFSuvETMoCr/tX4PsR8TVKNrcb5aAMZQUbyG2UZp0TI+Jfqvg+02EcwyYzfxYR11LeofFxSsb/EcrC+OIQ63qymjdfiogHKCvZWyg3xNVdTrnx5fKI+Dzl7O8ZlPtLJmbmJ4Y4GYPWl5l/jIjPAcdFxNMoZ+4bUpbNZzLzbsr83z8iDqAsh3sy856I+DDw7Yh4BqV57AnK3cQHAG+tMvHPU1boiyLiW5TrmEcOFnhEfINyBnId5exiD8qZ3v8d4jz4GHBlRDxFuZnrT5TrrG8APlVl6ycBf0u5C/pkynr1LOCvgV9l5vmUO66XAodX1ymXZeasiLiEsuO8ser/Vso2d80Q44SyvD4UEb+mvFjqMMpZRF3HONorysxbI+J84GvV8plHOZvanrJdAxARV1bD79kpoKoJ9iDKZaYbgedH7WksyhnzhtW+48bamdYbq+H7e0LnF5TLTmdW68WLKdvXH/sZfiD3U+6Gn0lJsD5Pue7cOuu6HDg6Ir5Cuf/hLynLeyBfpjzFNGjilJnzqhOO/u7kbzL+1vd+BpwXEZ+lPAWxJeUGu/dm5pKqzn+OiOWUM+a/obSMHFqr5xjKe4HOpDzi/BJK69vp/TTlr6mhjG+7iGgd4DemNPtvX+u/4gSkav3pZp8zFLtSzvy/OsAwR1fjeH23lVatWBczyPZXGfb1NzMzIo6iXG59D+WpnjU7juYgd2Oy6nsInqJszLMoTcntz6r2sfp7JPajZMdLKY91vp4Od1tTrt8soGSGP6bsoFa5e73q/kCHGHeiZGhLKTfUHUHb0wt0uFuXDk8zDDSetmGmUJrDHqzG+0tgp7ZhVolhgLqCsjEtohzMzqXzeyQ2rBbuPMpGci/l/QlvGGicA0znoPVVw72X8nTF49UwFwHPqPptQbluv4TV3yPxOkpi9GfKY29zKRl+/Znxg1j5PohfVcuy453hte8cQXmUrfVeh98AR3YxvZ3Wu1dV0/xwFectlORhk9owz6GcWd5XzYP5wHeAF9eGOYzybPgTrHx/w0cp28pD1XL9NaW5fqB1oeM6Q7lR6kxWNkl/k3JAXmU6+4ljtflBOQk4uTZN/T3HfvUAsfYx8DsG6p++Wp0J7NWhnt1rZe+kJExLKQnjq2i7G77T8uy0vCmXlFpJ1k+onrqoDfcxVr7D5gpKUrrKPqB93G3fX+WJAgZ+905rmfUNZfz91DWJ8mTMAla+R+K4Wv9xlO37rmp9uAU4rEM9h1DeQ/BEVdcq73VoG7bjttnfNNP5PRIDjo+VT21082l/j8SA+5xu42Tl01N/19/0U9bbPwPvahum33Wlw/Z3f7XsbmD1dx9dzfCuvzPbvvdJyvF8y6p70ONof5+oKljrRHl/wacoj92tzW+vlNZLUX7T405gm8yc33SYkRLlN2UeyEzfsKl1zrq0/q7pzZbDIiKmUF7ecxXlDPPVlGbqb5lESJK09lorEglKE9f2lObMTSjXpf6N8kZASWunxymXawZ6yqObYSStw9baSxuSJGntNxxvtpQkSespEwlJktTY2nKPxHpviy22yL6+vl6HIUnrlNmzZz+Qmf29CVmjwERiLdHX18esWU1eUClJ66+I+P3gQ2kkeWlDkiQ1ZiIhSZIaM5GQJEmNeY/EWmzZsmUsWLCAxx57rNehjIqJEycybdo0JkyY0OtQJEldMpFYiy1YsICNN96Yvr4+Vv2l7bEnM1m8eDELFixgm2226XU4kqQueWljLfbYY4+x+eabj/kkAiAi2Hzzzdeb1hdJGitMJNZy60MS0bI+TaskjRVe2tCAxo0bx0te8pIV3T/4wQ/o78VZkydP5pFHHhmlyCRJawMTiXVI38cvG9b65p/whkGHmTRpEnPnzh3W8UqSxg4TCQ3JI488wv7778+DDz7IsmXLOPbYY9l///1XGWbhwoUccsghPPzwwyxfvpxTTz2VV7/61fz85z/nmGOO4fHHH+cFL3gBZ555JpMnT+7RlEg9MnOTXkcwsmY+1OsINMq8R0IDWrp0KdOnT2f69OkceOCBTJw4kUsuuYQ5c+Zw1VVX8eEPf5j2n6I/77zz2HfffZk7dy433XQT06dP54EHHuDYY4/liiuuYM6cOcyYMYOTTjqpR1MlSRoutkhoQO2XNpYtW8YnP/lJrrnmGjbYYAPuvvtu7rvvPp797GevGGannXbi3e9+N8uWLeOAAw5g+vTp/PKXv+SWW25ht912A+CJJ55g1113He3JkSQNMxMJDcm5557LokWLmD17NhMmTKCvr2+1RzZf85rXcM0113DZZZfxjne8g49+9KNsuumm7L333px//vk9ilySNBK8tKEheeihh5g6dSoTJkzgqquu4ve/X/2H937/+98zdepU3vOe93DkkUcyZ84cdtllF6699lrmzZsHwKOPPsodd9wx2uFLkoaZLRIaksMOO4w3velNzJgxg+nTp7P99tuvNszVV1/NF7/4RSZMmMDkyZM555xzmDJlCmeddRaHHnoojz/+OADHHnss22233WhPgiRpGEX7jXLqjRkzZuSsWbNWKbv11lt50Yte1KOIemN9nGatZ3xqY1hFxOzMnDGqI9UqvLQhSZIaM5GQJEmNmUhIkqTGTCQkSVJjJhKSJKkxEwlJktSY75FQvxYvXsyee+4JwL333su4ceOYMmUKANdffz1Pe9rTehmeJGktYCKxLhnu588Hed578803X/E7GzNnzmTy5Ml85CMfWdF/+fLljB/vKiRJ6zOPAhqSI444gs0224wbb7yRV7ziFWy88carJBg77rgjP/rRj+jr6+M73/kOX/3qV3niiSd41atexSmnnMK4ceN6PAWSpOHkPRIasjvuuIMrrriCE088sd9hbr31Vi688EKuvfZa5s6dy7hx4zj33HNHMUpJ0miwRUJDdtBBBw3asnDllVcye/ZsdtppJwCWLl3K1KlTRyM8SdIoMpHQkG200UYr/h8/fjxPPfXUiu7WT4pnJocffjjHH3/8qMcnSRo9XtrQGunr62POnDkAzJkzhzvvvBOAPffck4svvpj7778fgCVLlnT8yXFJ0rrNREJr5C1veQtLlixh+vTpnHrqqSt+FnyHHXbg2GOPZZ999uGlL30pe++9NwsXLuxxtJKk4ebPiK8l/BnxYn2cZq1n/BnxYeXPiPeeLRKSJKkxEwlJktSYiYQkSWrMRGIttz7dw7I+TaskjRUmEmuxiRMnsnjx4vXiAJuZLF68mIkTJ/Y6FEnS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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "df_ct_1 = pd.crosstab(data['Deffected'], data['Марка стали'], margins = True, margins_name = 'Total')\n",
    "display(df_ct_1)\n",
    "df_ct_1.info()\n",
    "df_ct_1.drop('Total', axis = 0).T.plot(kind = 'bar', stacked = True)\n",
    "plt.title('Diagram of deffected sheets ratio. Диаграмма соотношения брака', fontsize = 15)\n",
    "plt.legend()\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We calculated a cross tabulation with the distribution of normal (`False`) and defective (`True`) batches by steel grades. A graph is also plotted."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Вычислили таблицу перекрестной классификации с распределением нормальных (`False`) и бракованных (`True`) партий по маркам сталей. Так же построен график "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Calculation of $\\chi^2$ and testing of the hypothesis of equality of fractions. Вычисление $\\chi^2$ и проверка гипотезы о равенстве долей"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [],
   "source": [
    "def hyp_testing(df_ct, alpha):\n",
    "    value = np.array([df_ct.iloc[1][0:2].values,\n",
    "                      df_ct.iloc[0][0:2].values])\n",
    "    chi2, p_value, dof, _ = st.chi2_contingency(value, correction = False)\n",
    "    chi2_critical = st.chi2.ppf(1-alpha, dof)\n",
    "    print('chi2: ', chi2)\n",
    "    print('p_value: ', p_value)\n",
    "    print('dof: ', dof)\n",
    "    print()\n",
    "    print('alpha: ', alpha)\n",
    "    print('chi2_critical: ', chi2_critical)\n",
    "    print()\n",
    "    if chi2_critical < chi2:\n",
    "        print('Hypothesis H0 is rejected. Гипотеза Н0 отклоняется!')\n",
    "    else:\n",
    "        print('Hypothesis H0 is not rejected. Гипотеза Н0 не отклоняется!')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "chi2:  1.0891044742877811\n",
      "p_value:  0.2966697135957961\n",
      "dof:  1\n",
      "\n",
      "alpha:  0.05\n",
      "chi2_critical:  3.841458820694124\n",
      "\n",
      "Hypothesis H0 is not rejected. Гипотеза Н0 не отклоняется!\n"
     ]
    }
   ],
   "source": [
    "alpha_1 = 0.05\n",
    "hyp_testing(df_ct_1, alpha_1)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Using a nonparametric $\\chi^2$ test, it was found that more than 3 defective sheets per batch do NOT come out significantly more often for steel grade `A` than for steel grade `B` at a critical level of $\\alpha$ = 5%. The value of $\\chi^2$, which is obtained in this study, is close enough to zero, which indicates a small value of the squares of the difference between the observed and expected values. Therefore, there is no need to introduce additional quality control measures for `A` grade steel."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "С помощъю непараметрического $\\chi^2$-теста установлено, что более 3 бракованных листов на партию НЕ выходит значимо чаще для стали марки `A`, чем для стали марки `B` при критическом уровне $\\alpha$ = 5%. Значение $\\chi^2$, которое получено в данном исследовании достаточно близко к нулю, что говорит о небольшом значении квадратов разности между наблюдаемыми и ожидаемыми значениями. Поэтому, не нужно вводить дополнительные меры контроля качества для стали марки `A`."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Hypothesis testing as item 2. Проверка гипотезы по пункту 2."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "In this task, it is necessary to check that at rolling speeds of more than 4 m/s, more than 3 defective steel sheets per batch come out significantly more often than at lower rolling speeds.\n",
    "\n",
    "To test the null and alternative hypotheses $Н_0: р_1 = р_2;Н_1: р_1 ≠ р_2$ we also use the test $\\chi^2$-statistics, BUT without dividing by steel grades."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "В данном задании необходимо обосновать, что при скоростях прокатки более 4 м/с свыше 3 бракованных листов стали на партию выходит значимо чаще, чем при меньших скоростях прокатки.\n",
    "\n",
    "Чтобы проверить нулевую и альтернативные гипотезы $Н_0: р_1 = р_2;Н_1: р_1 ≠ р_2$ также используем тестовую $\\chi^2$-статистику, НО без деления на марки стали."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Adding a column with the check `more than 3 defective sheets per batch at a speed > 4 m/s`. Добавление столбца с проверкой `больше 3-х листов брака на партию при скорости > 4 м/с`."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Число бракованных листов</th>\n",
       "      <th>Скорость прокатки</th>\n",
       "      <th>Марка стали</th>\n",
       "      <th>Deffected</th>\n",
       "      <th>High speed</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>3</td>\n",
       "      <td>3.8</td>\n",
       "      <td>A</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>3</td>\n",
       "      <td>3.8</td>\n",
       "      <td>B</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>3</td>\n",
       "      <td>4.8</td>\n",
       "      <td>B</td>\n",
       "      <td>False</td>\n",
       "      <td>True</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>4</td>\n",
       "      <td>4.4</td>\n",
       "      <td>B</td>\n",
       "      <td>True</td>\n",
       "      <td>True</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>6</td>\n",
       "      <td>5.0</td>\n",
       "      <td>B</td>\n",
       "      <td>True</td>\n",
       "      <td>True</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   Число бракованных листов  Скорость прокатки Марка стали  Deffected  \\\n",
       "0                         3                3.8           A      False   \n",
       "1                         3                3.8           B      False   \n",
       "2                         3                4.8           B      False   \n",
       "3                         4                4.4           B       True   \n",
       "4                         6                5.0           B       True   \n",
       "\n",
       "   High speed  \n",
       "0       False  \n",
       "1       False  \n",
       "2        True  \n",
       "3        True  \n",
       "4        True  "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "data['High speed'] = data['Скорость прокатки'] > 4\n",
    "display(data.head())"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Cross tabulation. Таблица перекрестной классификации"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th>High speed</th>\n",
       "      <th>False</th>\n",
       "      <th>True</th>\n",
       "      <th>Total</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Deffected</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>False</th>\n",
       "      <td>35</td>\n",
       "      <td>105</td>\n",
       "      <td>140</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>True</th>\n",
       "      <td>23</td>\n",
       "      <td>74</td>\n",
       "      <td>97</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Total</th>\n",
       "      <td>58</td>\n",
       "      <td>179</td>\n",
       "      <td>237</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "High speed  False  True  Total\n",
       "Deffected                     \n",
       "False          35   105    140\n",
       "True           23    74     97\n",
       "Total          58   179    237"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<class 'pandas.core.frame.DataFrame'>\n",
      "Index: 3 entries, False to Total\n",
      "Data columns (total 3 columns):\n",
      " #   Column  Non-Null Count  Dtype\n",
      "---  ------  --------------  -----\n",
      " 0   False   3 non-null      int64\n",
      " 1   True    3 non-null      int64\n",
      " 2   Total   3 non-null      int64\n",
      "dtypes: int64(3)\n",
      "memory usage: 96.0+ bytes\n"
     ]
    },
    {
     "data": {
      "image/png": "iVBORw0KGgoAAAANSUhEUgAAAhIAAAEpCAYAAADGaMtMAAAAOXRFWHRTb2Z0d2FyZQBNYXRwbG90bGliIHZlcnNpb24zLjMuMiwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy8vihELAAAACXBIWXMAAAsTAAALEwEAmpwYAAAo70lEQVR4nO3de7wdZXno8d9DEgkSRC4JUC5uVBQRbaQBpZziBUG8AlUQigqVgrW2Hk7VHi89NSocsQq2aqUFhcApKIgiVKggEURpEZIQrYBQWoJEIgkJIkgCCTznj3dWMllZe++1J3vttbPz+34+67P3vDNr5pn7M+87MysyE0mSpCa26HcAkiRp02UiIUmSGjORkCRJjZlISJKkxkwkJElSYyYSkiT1URTPjohJ/Y6lCRMJSZLGWES8LCIuiojFwJPAw8Br+xxWI8MmEhExOyKy+jwdEQ9HxK0RcXpE7Nw27EA13Jt6F/KmIyK2joivR8TyarmcOILvvqn6zsBoTDMiTo6IeyNiTUTcMJJxDjO9Y0YyX12Mb9pIl1WHcbyqGse+oxXXMNObUe0nA2MxvZHGMRbLIyLm1I4T9c+iXk1T2lRFxGuBm4BtgZOBA4H9gO/3M66mJnc53CPA4dX/21Jm+L3AKRFxeGbOr/otoSyQn49qlJuu9wJvBt4F/BL4r35Ms0r4zga+BHyDkvmOlmOAHYE5ozjOTc0M4OPADcCicRjHAsp+2evt7+fAH9e6/wI4qMfTlDYpEbElcC5wOfCOnABvhew2kViTmTfXuq+JiLOBG4FLIuKFmflUZj4B3Nx5FKMvIrbKzJVjNb0G9gbuysxv9nOaEfE/gEnAeZn50zGMRRupajOdlJlPNh1HZv6G3u+XATxWP05ExNt6PE1pU3QIsCtw6kRIIgDIzCE/wGzgoUH6HQ4kcHjVPVB1v6k2zLuAHwErKFfC1wOzOozrz4H7gd8C36Ys7AReVRsmgb8E/g5YBtxTlb8R+B6wFGgdNA/rNB/Ay4F5wMoqrj0pV3LfBh4D7gRe08Vy2RG4AFgOPE65CpxV67+oinftZ4hxRRXfUuBR4ELgj6rvDdSGmwr8bbWcngB+ArxhqGlW420vO7Gb8dXGezLwH8Aq4EHgMkrN1JxO06t974hqWa8CflVNa0rbuN8K3F2tjxuBWfUYh1hmHwHuqcX0XWDnqt+rWtsOpQbmMeC/gT/rMJ7/AfygWofLKVcK27QNswfwdco2/DhwDfDCtm1+g3UNTAE+B/yiWr4PUK5CnjHEfM2pltmRwO3AauAPgF2A86r5WFkts9Na4xomjtby2Lc2nWcCX6jWyyrgVtr2mZF8gK8BN7eVfQ5Y1FZ2AzCnrexmNtzXP1DF9Ei1fv8FeH6HcW0wz8Butf6XAadQ9o2VwFXArm3jOYOyfT8GLAYuam1LHfatY9vKP1SV39B2rEngu23D7gysYcP9etjpD7LMt6LsU/dV29e9wKdr/SdVsbS2v9uBP+ownmOq6T9BORacDkxu23YG+8ypH187jHteh/U96PSq/idW455WK7usvoyrslXAB9vKhjzmdBsnZT9sn94ltB2bgO2rYZcAT9eWy+eGWG8fpOy/Z1TrbGU1/dd12L5Hc/utH5t/j3KuqZcNex4d7LOxN1teT9kxXjHEMAOUE+PRlJPjYuDGiHhua4CIOAr4InAlcBTwU+Crg4zvQ5SD6juB91dle1IONO+knJj+DfjXiGivVn0mcA7weeA4ygni/1EOgj8C/pDSHPCNiHjmkHNeEo/XUTaKt1PuN7k+Ip5f9T8KuJpS3Xtg9RnM+4G/qWJ7G2WD+dsOw11G2cn+L6X54lbgyoiYOcQ0vwK8r+p/fFV2VZfjIyL+Gvgnysn2SErTySPANOBTlG3gtrbpERHHAN8CbgHeAnyCskN8ujbu/Sg7508oy/5K4NIhllPre+8CPgqcRVkH76UkFVu3DXpuNe6jKDvlP0TEAbXxHATMpRxw3gacCrwBOL82zPaUbeOFwJ9SDoJbA9dFxFaUA8jx1eDvY/11/ZGq3/8BDq3G/wjlAD+UAcr6/3QVz72UxHUFJZE+HPgspRnhi9V3hoqjk3Or759OWT73A1dVtVdNbEk5MYxIRPwhJXlstxulKe4ISiI7CbgpIrZtG+561s1r67O01v9AShPLXwInAS+l7Lt1Myj7wBsp6+i5wPc73EH/a9ZvuqHqfrhD/CuBgyNit1rZCZQDdLtup79WRARwBWXb/wfKdvJxynbS8kngY5TjylsobfIXRcRxtfEcRtkHF1CW9Rcpx7QvVYO0msXq29Npte5PDRbjIHEPN73GujnmbMS4f49yjGp3ZjWtD1Oa8Q6kHE+GsjWwF2U/Pasa7y+A73TY/0Zz+23Ny/Mo54mvZ+bsWq9uz6Mb6iLrnc0gNRJV/yXA2dX/A7TVSLQNuwWlOeXnwN/Uym8Frmob9st0rpG4bZh4W9O4hlKV336V8Mpa2Z9VZfVY9qnKXj/ENA7vMK6tKbUk/9SW1c4bJt5JlCvVs9vKv0ftyoV1NTSvbBvuRuAbQ02Tzlekw44PeDblCvysIeLvdKUQlKuk89vK3005wO5QdV8K3AFEbZiPMUyNBOWg880h+rfm95O1sinV+jmjVvZD4Pq2776mvqwoB8rlwPa1YbajJATvq7r3bd9Wq/LvAGcOt4+1fWdONa6Zwww3mZKYr2JdrcRgcay3/oEXUa6eTmjbb34GXDOSeGvfvwH4l7ayIWskqm3/TkryuUHcbfvIVpQrqHe1jeuyYWJaDTynVnYQtVrUQaa1azXMwbXyRZSLm98Cu1dlB7KulumG2rCzKbWflwIfrZX/nHLSX7tfdzv9DsO9rhrmLYP0376K9eNt5VdTmj5b3Td32Af+CniKqmanrV/HfZPur/SHnR4NaiTo/pjTbZxz2tbp92rb6Ym18tuBf2wb1yKGrpGYXY1nyP2vB9vvbErScQ/lom3SEDF2PI8O9hmNxz9jyJ4RL4qIyyPiQcrGsppydfeCqv8kYGY1Y3Xt3S1XtRdExG4RcUFE/JJSQ7IaOKw1jZonKSePlnuqv9/vULbrELN1ALAsM3/QKsjM31JOHCO9otudUsNyRVv5t9q6X0vJdG+KiMmtD+WKutMV3XC6Gd+BlAP4+YOMYzAvoNT2XNo27u9TmlNaTw8cAFyZ1ZZbaZ/vThYCb4iIT0TEAUNcuV3b+iczVwP/SbnSpapxOrBDjD+ibD+/V331tZSDyG9qwzwKzGf45b4QODEi/ioiXlpdRXbjl5m5sF4QxakRcUdErKxivIhSE7BHl+Nt2Z+y336jVZCZT1fdTWskZrB+TUA3/piSlH2+vUdEvCIivhcRyyn79OOUWrD2fXo4CzLzvlZHZt5UxVmvmXp9RPxbRDxSTWtx1at9Wg9TrtjeVYv/QspxrZPzKCdFIuL3gW2obZMNpl/3GmBFZg52nNyXUgP7jbbyS4AXVE/4TKLcON9pmC0Yukaro/q+VO0r9X6jPr2abo85w8bZYZ5eS9kvZnfovQh4bUS8OCKmDDeuNt3sf6O5/U6jnD93odzkud52O4Lz6AY2KpGIiKnADpQ2zE79WzvO7pSqmT+gHMR+Qlm5ANMpmc+ytq+3d7esN62I2IKSdPw+pXng1dU0/rU2jZZHqxXW0rqB7detglx3U1v7d+t2aY+jFtv2Q3yvk9YjtO0H4fbuHathV7d9ZlOW70h1M74dqr9LGowbytVPfdz3VuWt8e/M8PPdyXmUpo1jgB8DD0bEpwapiq57knXrdTtK9v7lthifoNRetGLckdJ01b6cXs3wy/00yhXon1G2+fsj4n92MX+dtq1TKdWol1OqhA9gXZPVUNtqJ7tQbox8vMN0n1ndVd61KkHak3L/RrffmUrZ1j5JuXKu99uDctwI4D2Uq7D9KdvGSOe10/a0lLIMiIj9KcePxZQq3QNZ11TbaVrnUZLDrSnbxZwhpn0tsFVVXf1uOiQdDabfsgND75e7VH/bt6VW93aUbXvKEMOM9Fi2AxvuJ79X6z/a06vr9pjTTZxrVdv2GcAXM3Nxh0H+knKc+Rnl+LIaeM4wsa6h+/1vNLffv6Akl09S7klca4Tn0Q2MJHvq5NXVOP59kP4HUq4AD83MtY+EtrVzLqMs2Olt323vbsm27ucDL6M0RXy3No2tho2+uSWUK7B2O1HasUei1Z7WPr727hWU+zeOHOH4B9PN+JZXf3ehVNWOZNxQ2idv69C/tXP/iuHnewNVMvh54PMRsTvl3oDTKfPzj13G+GvW3Yx6dYf+D1R/V1B2sE5twY8OE+cqyk75NxGxF+Uei7+LiLvq22qnr3YoO5rS5PSxVkFE7DPU9IewBJgWEc9sO5jtBDye5emrkdiHcrC5fQTfeT+lyvlcNqz9O5xywDuiqumjutJrcqLptD3NYN1J+CjKMejtrZqxiBjqRHAdpRbo74DbM/Png1U0ZebTEXEh5aD9BsqBea+2wUY6/ZblrEsWOmnN3wzW7cdQ1jGU7XoF5cTXvozqw4zEI2z4QqULa/8/NMrTq+v2mAPDx1l3NPA8yj1OG8jMuyLiJErTyMmUhGKwWqKWB+l+/xvN7XcppUns9cAXIuKyzLy76rdR59HGNRIR8WzgM5SmgOsGGawVxNoFU1XxDbS6q+qVhZSrrLq3dBlKp2k8h94+v/5jYEZEHFyb5jMpN7v8aITjup9yQm2f//Ybe+ZSruAfy8x57Z8RTrPb8f075WB/whDjqV/lt9xFOakPdBp3ZrYObLcCb2mr8u90Q9OgMvP+zDyDsh12fWKtTlA3U56+6BRjK5GYC7yYctJoH+au2jKAITL3zPxPyk1lT4wkzpqt2PBmxuPburupTYOy3JNygymw9srrbYx8+4Vyo25Sbs7qxnaUm9P+umpyarcV5R6ONbWyY2h24bNfVcMBrL3BdgblhrzWtFa3Na+1L9e1qiT2AuBP6K7J73yqpxRq20vdiKZfMxfYPgZ/+d/PKM1BR7eVHwPcnZnLqmPv/EGGeZrBLxAHs6bDcWTtibIH06vr9pgzbJw1kym1imdk5sOdJlrVgn4FuDQz51TjGu5R7Vbzejf732huv1+talW+QjmHnVM79m7UebTbHXNyRLSqS7ahVAO9l3LVcHh7W0vNzZRHUs6NiL+l1E7Mpqzwuv8LfCsivkTJ5g6inJShbGBD+TmlWufMiPg/VXyf6DCNUZOZ10TETZR3aHyYkvF/kLIyPjvCcT1VLZvPRcRDlI3srZQb4uq+R7nx5XsR8RnK1d+zKPeXTM3Mj4xwNoYdX2b+OiI+BZweEc+gXLlvSVk3n8jMX1KW/xERcSRlPTyQmQ9ExAeA/xcRz6JUjz1JuZv4SOBtVSb+GcoGfWlEfJXSjnnScIFHxD9RrkBuplxdvJpypfe/R7gM/gqYGxFPU27mepTSzvpG4GNVtn4W8A7KXdBfpGxXOwGvBH6UmV+j3HG9EjihaqdcnZnzIuJyyoHztqr/2yj73I0jjBPK+np/RPyY8mKp4ylXEXUd42gfUWbeGRFfA75UrZ97KFdTe1P2awAiYm41/CGdAqqqYI+mNDPdBjw3ak9jUa6Yt6yOHbfVrrTeVA0/2BM636c0O51fbRcvpuxfvx5k+KEspdwNP5uSYH2G0u7cuur6HnBqRPwd5f6H36es76F8nvIU07CJU2beU11wDHYnf5Ppt753DXBxRHyS8hTELpQb7N6TmSuqcf51RKyhXDH/IaVm5LjaeD5OeS/Q+ZRHnF9CqX07d5Cq/I01kum9ICJaJ/htKNX+e9f6r70AqWp/ujnmjMSBlCv/LwwxzKnVNN7Q7UirWqzLGGb/q4z69puZGRGnUJpbT6Y81bNx59Ec5m5M1n8PwdOUnXkepSq5/VnVATZ8j8ThlOx4JeWxzjfQ4W5rSvvNYkpmeDXlALXe3etV9593iHF/Soa2knJD3Ym0Pb1Ah7t16fA0w1DTaRtmOqU67OFquj8A9m8bZr0YhhhXUHamZZST2UV0fo/EltXKvYeyk/yK8v6ENw41zSHmc9jxVcO9h/J0xRPVMJcCz6r67Uhpt1/Bhu+ReD0lMfot5bG3hZQMv/7M+NGsex/Ej6p12fHO8Np3TqQ8ytZ6r8NPgZO6mN9O293Lq3n+TRXnHZTkYdvaML9DubJ8sFoGi4B/Bl5cG+Z4yrPhT7Lu/Q0fouwrj1Tr9ceU6vqhtoWO2wzlRqnzWVcl/RXKCXm9+Rwkjg2WB+Ui4Iu1eRrsOfYbhoh1gKHfMVD/DNTGmcBrO4znVbWyd1ESppWUhPHltN0N32l9dlrflCalVpL1r1RPXdSG+yvWvcPmOkpSut4xoH3abd9f74kChn73TmudDYxk+oOMayvKkzGLWfceidNr/SdR9u/7q+3hDuD4DuN5O+U9BE9W41rvvQ5tw3bcNwebZzq/R2LI6bHuqY1uPu3vkRjymNNtnKx7eupPBpt/ynb7W+CP24YZdFvpsP8trdbdrWz47qMbGN3td3bb9z5KOZ/vUnUPex4d7BPVCMadKO8v+Bjlsbvx/PZKabMU5Tc97gX2zMxFTYfplSi/KfNQZvqGTW1yNqXtd2NvthwVETGd8vKe6ylXmH9Aqab+qkmEJEnj17hIJChVXHtTqjO3pbRL/T3ljYCSxqcnKM01Qz3l0c0wkjZh47ZpQ5IkjX+j8WZLSZK0mTKRkCRJjY2XeyQ2ezvuuGMODAz0OwxJ2qTMnz//ocwc7E3IGgMmEuPEwMAA8+Y1eUGlJG2+IuK+4YdSL9m0IUmSGjORkCRJjZlISJKkxrxHYhxbvXo1ixcvZtWqVf0OZUxMnTqV3XbbjSlTpvQ7FElSl0wkxrHFixezzTbbMDAwwPq/tD3xZCbLly9n8eLF7Lnnnv0OR5LUJZs2xrFVq1axww47TPgkAiAi2GGHHTab2hdJmihMJMa5zSGJaNmc5lWSJgqbNjSkSZMm8ZKXvGRt97e//W0Ge3HWtGnTeOyxx8YoMknSeGAisQkZ+PBVozq+RWe8cdhhttpqKxYuXDiq05U2a7O37XcEvTX7kX5HoDFm04ZG5LHHHuOQQw5hv/324yUveQlXXHHFBsMsWbKEgw8+mJkzZ7Lvvvvywx/+EIBrr72WAw88kP3224+jjz7a2gtJmgBMJDSklStXMnPmTGbOnMlRRx3F1KlTufzyy1mwYAHXX389H/jAB2j/KfqLL76Y173udSxcuJCf/OQnzJw5k4ceeojTTjuN6667jgULFjBr1izOOuusPs2VJGm02LShIbU3baxevZqPfvSj3HjjjWyxxRb88pe/5MEHH2TnnXdeO8z+++/Pu9/9blavXs2RRx7JzJkz+cEPfsAdd9zBQQcdBMCTTz7JgQceONazI0kaZSYSGpGLLrqIZcuWMX/+fKZMmcLAwMAGj2wefPDB3HjjjVx11VW8853v5EMf+hDbbbcdhx56KF/72tf6FLkkqRds2tCIPPLII8yYMYMpU6Zw/fXXc999G/7w3n333ceMGTM4+eSTOemkk1iwYAGveMUruOmmm7jnnnsAePzxx7n77rvHOnxJ0iizRkIjcvzxx/PmN7+ZWbNmMXPmTPbee+8Nhrnhhhv47Gc/y5QpU5g2bRoXXngh06dPZ86cORx33HE88cQTAJx22mm84AUvGOtZkCSNomi/UU79MWvWrJw3b956ZXfeeScvetGL+hRRf2yO86zNjI9/jqqImJ+Zs8Z0olqPTRuSJKkxEwlJktSYiYQkSWrMREKSJDVmIiFJkhozkZAkSY35HgkNavny5RxyyCEA/OpXv2LSpElMnz4dgFtuuYVnPOMZ/QxPkjQOmEhsSkb7+fNhnvfeYYcd1v7OxuzZs5k2bRof/OAH1/Zfs2YNkye7CUnS5syzgEbkxBNPZPvtt+e2225jv/32Y5tttlkvwdh33335zne+w8DAAP/8z//MF77wBZ588kle/vKX8+Uvf5lJkyb1eQ4kSaPJeyQ0YnfffTfXXXcdZ5555qDD3HnnnVxyySXcdNNNLFy4kEmTJnHRRReNYZSSpLFgjYRG7Oijjx62ZmHu3LnMnz+f/fffH4CVK1cyY8aMsQhPkjSGTCQ0YltvvfXa/ydPnszTTz+9trv1k+KZyQknnMCnP/3pMY9PkjR2bNrQRhkYGGDBggUALFiwgHvvvReAQw45hMsuu4ylS5cCsGLFio4/OS5J2rSZSGijvPWtb2XFihXMnDmTs88+e+3Pgu+zzz6cdtppHHbYYbz0pS/l0EMPZcmSJX2OVpI02vwZ8XHCnxEvNsd51mbGnxEfVf6MeP9ZIyFJkhozkZAkSY2ZSEiSpMZMJMa5zekels1pXiVpojCRGMemTp3K8uXLN4sTbGayfPlypk6d2u9QJEkj4AupxrHddtuNxYsXs2zZsn6HMiamTp3Kbrvt1u8wJEkjYCIxjIjYHbgQ2Bl4GjgnM/8+IrYHLgEGgEXAMZn5cPWdjwAnAU8B78/Ma5pMe8qUKey5554bPQ+SJPWKTRvDWwN8IDNfBLwCeF9E7AN8GJibmXsBc6tuqn7HAi8GDge+HBH+5KUkaUIykRhGZi7JzAXV/48CdwK7AkcAF1SDXQAcWf1/BPD1zHwiM+8F7gEOGNOgJUkaIyYSIxARA8DLgB8DO2XmEijJBtD6actdgftrX1tclUmSNOGYSHQpIqYB3wROzczfDDVoh7KOj11ExCkRMS8i5m0uN1RKkiYWE4kuRMQUShJxUWZ+qyp+MCJ2qfrvAiytyhcDu9e+vhvwQKfxZuY5mTkrM2dNnz69N8FLktRDJhLDiIgAvgrcmZln1XpdCZxQ/X8CcEWt/NiI2DIi9gT2Am4Zq3glSRpLPv45vIOAdwL/ERELq7KPAmcAl0bEScAvgKMBMvP2iLgUuIPyxMf7MvOpMY9akqQxYCIxjMz8EZ3vewA4ZJDvnA6c3rOgJEkaJ2zakCRJjZlISJKkxkwkJElSYyYSkiSpMRMJSZLUmImEJElqzERCkiQ1ZiIhSZIaM5GQJEmNmUhIkqTGTCQkSVJjJhKSJKkxEwlJktSYv/4pbWpmb9vvCHpr9iP9jkDSCFgjIUmSGjORkCRJjZlISJKkxkwkJElSYyYSkiSpMRMJSZLUmImEJElqzERCkiQ1ZiIhSZIaM5GQJEmNmUhIkqTGTCQkSVJjJhKSJKkxEwlJktSYiYQkSWrMREKSJDVmIiFJkhozkZAkSY2ZSEiSpMZMJCRJUmMmEpIkqTETiS5ExHkRsTQiflYrmx0Rv4yIhdXnDbV+H4mIeyLiroh4XX+iliSp90wkujMHOLxD+eczc2b1uRogIvYBjgVeXH3nyxExacwilSRpDJlIdCEzbwRWdDn4EcDXM/OJzLwXuAc4oGfBSZLURyYSG+fPI+KnVdPHdlXZrsD9tWEWV2UbiIhTImJeRMxbtmxZr2OVJGnUmUg0dzbwPGAmsAQ4syqPDsNmpxFk5jmZOSszZ02fPr0nQUqS1EsmEg1l5oOZ+VRmPg2cy7rmi8XA7rVBdwMeGOv4JEkaCyYSDUXELrXOo4DWEx1XAsdGxJYRsSewF3DLWMcnSdJYmNzvADYFEfE14FXAjhGxGPg48KqImElptlgEvAcgM2+PiEuBO4A1wPsy86k+hC1JUs+ZSHQhM4/rUPzVIYY/HTi9dxFJkjQ+2LQhSZIaM5GQJEmNmUhIkqTGvEdCksbQwKqL+x1CTy3qdwAac9ZISJKkxkwkJElSYyYSkiSpMRMJSZLUmImEJElqzERCkiQ1ZiIhSZIaM5GQJEmNmUhIkqTGTCQkSVJjJhKSJKkxEwlJktSYiYQkSWrMREKSJDVmIiFJkhozkZAkSY2ZSEiSpMZMJCRJUmMmEpIkqTETCUmS1JiJhCRJasxEQpIkNWYiIUmSGjORkCRJjZlISJKkxkwkJElSYyYSkiSpMRMJSZLUmImEJElqzERCkiQ1NrnfAWwKIuI84E3A0szctyrbHrgEGAAWAcdk5sNVv48AJwFPAe/PzGv6ELYmqIFVF/c7hJ5a1O8AJI2INRLdmQMc3lb2YWBuZu4FzK26iYh9gGOBF1ff+XJETBq7UCVJGjsmEl3IzBuBFW3FRwAXVP9fABxZK/96Zj6RmfcC9wAHjEWckiSNNROJ5nbKzCUA1d8ZVfmuwP214RZXZZIkTTgmEqMvOpRlxwEjTomIeRExb9myZT0OS5Kk0Wci0dyDEbELQPV3aVW+GNi9NtxuwAOdRpCZ52TmrMycNX369J4GK0lSL5hINHclcEL1/wnAFbXyYyNiy4jYE9gLuKUP8UmS1HM+/tmFiPga8Cpgx4hYDHwcOAO4NCJOAn4BHA2QmbdHxKXAHcAa4H2Z+VRfApckqcdMJLqQmccN0uuQQYY/HTi9dxFJkjQ+2LQhSZIaM5GQJEmNmUhIkqTGTCQkSVJjJhKSJKkxEwlJktSYiYQkSWrMREKSJDVmIiFJkhozkZAkSY2ZSEiSpMZMJCRJUmMmEpIkqTETCUmS1JiJhCRJasxEQpIkNWYiIUmSGjORkCRJjZlISJKkxkwkJElSYyYSkiSpMRMJSZLUmImEJElqzERCkiQ1ZiIhSZIaM5GQJEmNmUhIkqTGTCQkSVJjJhKSJKkxEwlJktSYiYQkSWrMREKSJDU2ud8BqE9mb9vvCHpr9iP9jkCSNgvWSEiSpMZMJCRJUmM2bWykiFgEPAo8BazJzFkRsT1wCTAALAKOycyH+xWjJEm9Yo3E6Hh1Zs7MzFlV94eBuZm5FzC36pYkacIxkeiNI4ALqv8vAI7sXyiSJPWOicTGS+DaiJgfEadUZTtl5hKA6u+MvkUnSVIPeY/ExjsoMx+IiBnA9yLi591+sUo8TgHYY489ehWfJEk9Y43ERsrMB6q/S4HLgQOAByNiF4Dq79JBvntOZs7KzFnTp08fq5AlSRo1JhIbISK2johtWv8DhwE/A64ETqgGOwG4oj8RSpLUWzZtbJydgMsjAsqyvDgzvxsRtwKXRsRJwC+Ao/sYoyRJPWMisREy87+B3+1Qvhw4ZOwjkiRpbNm0IUmSGjORkCRJjZlISJKkxkwkJElSYyYSkiSpMRMJSZLUmImEJElqzERCkiQ15gupNlMDqy7udwg9tajfAUjSZsIaCUmS1JiJhCRJasxEQpIkNWYiIUmSGjORkCRJjZlISJKkxkwkJElSYyYSkiSpMRMJSZLUmImEJElqzERCkiQ1ZiIhSZIaM5GQJEmNmUhIkqTGTCQkSVJjJhKSJKkxEwlJktSYiYQkSWrMREKSJDVmIiFJkhozkZAkSY2ZSEiSpMZMJCRJUmMmEpIkqTETCUmS1JiJhCRJasxEokci4vCIuCsi7omID/c7HkmSesFEogciYhLwD8DrgX2A4yJin/5GJUnS6DOR6I0DgHsy878z80ng68ARfY5JkqRRZyLRG7sC99e6F1dlkiRNKJP7HcAEFR3KcoOBIk4BTqk6H4uIu3oaVX/tCDw0VhOLz4zVlDYLrrtN20Rff88Z8ylqPSYSvbEY2L3WvRvwQPtAmXkOcM5YBdVPETEvM2f1Ow6NnOtu0+b6U6/ZtNEbtwJ7RcSeEfEM4Fjgyj7HJEnSqLNGogcyc01E/DlwDTAJOC8zb+9zWJIkjToTiR7JzKuBq/sdxziyWTThTFCuu02b6089FZkb3AMoSZLUFe+RkCRJjZlISJKkxrxHQtJ6IiKA44HnZuYnI2IPYOfMvKXPoWkIEbHfUP0zc8FYxaLNi/dIqGci4pnAB4A9MvPkiNgLeGFmfqfPoWkIEXE28DTwmsx8UURsB1ybmfv3OTQNISKuH6J3ZuZrxiwYbVaskVAvnQ/MBw6suhcD3wBMJMa3l2fmfhFxG0BmPly9D0XjWGa+ut8xaPNkIqFeel5mvj0ijgPIzJVVtbnGt9XVL9gmQERMp9RQaBMREftSfnl4aqssMy/sX0SayEwk1EtPRsRWrDshPQ94or8hqQtfAC4HZkTE6cDbgL/ub0jqVkR8HHgVJZG4Gng98CPAREI94T0S6pmIOJRyAtoHuBY4CDgxM2/oZ1waXkTsDRxC+QG6uZl5Z59DUpci4j+A3wVuy8zfjYidgK9k5pv7HJomKBMJ9VRE7AC8gnJCujkzx+xXCNVM9ZTGBjLzF2Mdi0YuIm7JzAMiYj7wauBR4GeZ+eI+h6YJyqYN9UxEHAQszMyrIuIdwEcj4u8z875+x6YhXUVpjgpKG/uewF2AJ6JNw7yIeDZwLuVm58cAH91Vz1gjoZ6JiJ9SqlhfSmmfPQ/4w8x8ZV8D04hU7yd4T2a+p9+xaGQiYgB4Vmb+tN+xaOLyzZbqpTVZMtUjgC9k5t8D2/Q5Jo1Q9SIj3yGxiYiIua3/M3NRZv60XiaNNps21EuPRsRHgHcAB1ePFE7pc0waRkT8Za1zC2A/YFmfwlGXImIq8Exgx+olYq1HrZ8F/E7fAtOEZyKhXno78EfASZn5q+omvs/2OSYNr15rtIZyz8Q3+xSLuvce4FRK0lB/HfZvgH/oR0DaPHiPhKS1qlqjMzLzQ/2ORc1ExF9k5hf7HYc2HyYSGnUR8SjVS6jae1He+f+sMQ5JXYiIyZm5JiLmZuYh/Y5HzVSvM/9T4OCq6AbgnzJzdd+C0oRmIiEJgIhYUP3GxpnAXpTfRfltq39mfqtvwalrEfEVyr1IF1RF7wSeysw/6V9Umsi8R0I9FxEzWP+d/77YaHzbHlgOvIZ175NIwERiHGvVKAH7Z+bv1np9PyJ+0q+4NPGZSKhnIuItwJmUm7+WAs8B7sQXG41XM6onNn7GugSixarL8e8WyhM2T0XE8zLzvwAi4rnAU32NTBOaiYR66VOU12Nfl5kvi4hXA8f1OSYNbhIwjfUTiBYTifGvtd4+CFwfEf9ddQ8Af9yXiLRZ8B4J9UxEzMvMWVW16ssy8+nW7wD0OzZtqHWPRL/jUDMRsRg4q+rcipIY/pbSrLgyM88a7LvSxrBGQr3064iYBtwIXBQRSynvJdD41KkmQpuOTjVK06q/vlFWPWONhEZdROyRmb+IiK2BlZS3Ix4PbAtclJnL+xqgOoqI7TNzRb/jUDPWKKlfTCQ06uoHtIj4Zma+td8xSRNdRNyWmS/rdxza/PijXeqFetXqc/sWhbR58SVi6gsTCfVCDvK/pB6xWUr9YtOGRl1EPEW5Wzwod48/3uqFr8iWpAnFREKSJDVm04YkSWrMREKSJDVmIiFtgiLisbbuEyPiS9X/fxoR7xrm+2uHHy8iYnZEfLDfcUgaGd9sKU0wmfmP/Y5B0ubDGglpgqlf2UfE/hHx04j494j4bET8rDbo70TEdyPiPyPibwcZ1xkRcUc1js9VZXMi4h8j4ocRcXdEvKkqn1RN49Zq+PfUxvOhWvknauUfi4i7IuI64IW9WB6SessaCWnTtFVELKx1bw9c2WG484FTMvPfIuKMtn4zgZcBTwB3RcQXM/P+Vs+I2B44Ctg7MzMinl377gDwSuB5lF+afD7wLuCRzNw/IrYEboqIa4G9qs8BlEeAr4yIgymPCB9bxTAZWADMH+mCkNRfJhLSpmllZs5sdUTEicCs+gDViX+bzPy3quhi4E21QeZm5iPVsHcAzwHur/X/DbAK+EpEXAV8p9bv0sx8GvjP6ueq9wYOA14aEW+rhtmWkkAcVn1uq8qnVeXbAJdn5uNVDJ0SIUnjnE0b0sQ13K95PlH7/ynaLiwycw2lFuGbwJHAd+u928aV1fT+IjNnVp89M/PaqvzTtfLnZ+ZXBxmPpE2MiYQ0QWXmw8CjEfGKqujYkXy/+gn4bTPzauBUSlNIy9ERsUVEPI/yeyp3AdcA742IKdX3X1D9Auw1wLur8RERu0bEDMrPyx8VEVtFxDbAmxvOqqQ+smlDmthOAs6NiN8CNwCPjOC72wBXRMRUSq3C/6r1uwv4AbAT8KeZuSoivkK5d2JBRASwDDgyM6+NiBcB/16KeQx4R2YuiIhLgIXAfcAPG8+lpL7xFdnSBBYR0zLzser/DwO7ZOb/3MhxzgG+k5mXjUKIkjZx1khIE9sbI+IjlH39PuDE/oYjaaKxRkKSJDXmzZaSJKkxEwlJktSYiYQkSWrMREKSJDVmIiFJkhozkZAkSY39f+S/Al5vc8b1AAAAAElFTkSuQmCC\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "df_ct_2 = pd.crosstab(data['Deffected'], data['High speed'], margins = True, margins_name = 'Total')\n",
    "display(df_ct_2)\n",
    "df_ct_2.info()\n",
    "df_ct_2.drop('Total', axis = 0).T.plot(kind = 'bar', stacked = True)\n",
    "plt.title('Diagram of deffected sheets ratio. Диаграмма соотношения брака', fontsize = 15)\n",
    "plt.legend()\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "chi2:  0.05148060580663982\n",
      "p_value:  0.820506649959321\n",
      "dof:  1\n",
      "\n",
      "alpha:  0.05\n",
      "chi2_critical:  3.841458820694124\n",
      "\n",
      "Hypothesis H0 is not rejected. Гипотеза Н0 не отклоняется!\n"
     ]
    }
   ],
   "source": [
    "alpha_2 = 0.05\n",
    "hyp_testing(df_ct_2, alpha_2)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Using a nonparametric $\\chi^2$ test, it was found that more than 3 defective sheets per batch do NOT come out significantly more often at a rolling speed above 4 m/s, at a critical level of $\\alpha$ = 5%. The value of $\\chi^2$, which is obtained in this study, is very close to zero, which indicates a small value of the squares of the difference between the observed and expected values. Therefore, there is no need to reduce the rolling speed."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "С помощъю непараметрического $\\chi^2$-теста установлено, что более 3 бракованных листов на партию НЕ выходит значимо чаще при скорости прокатки выше 4 м/с, при критическом уровне $\\alpha$ = 5%. Значение $\\chi^2$, которое получено в данном исследовании очень близко к нулю, что говорит о небольшом значении квадратов разности между наблюдаемыми и ожидаемыми значениями. Поэтому, не нужно снижать скорость прокатки."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "scrolled": true
   },
   "source": [
    "## Main conclusion. Общий вывод"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "In this task, using a nonparametric $\\chi^2$ test, it was found that in both cases hypotheses about a significant increase in the number of batches with a marriage of > 3 sheets are not confirmed. In this regard, there is no need to introduce additional quality control measures for `A` grade steel and there is no need to reduce the rolling speed."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "В данном задании с помощъю непараметрического $\\chi^2$-теста установлено, что в обоих случаях не подтверждаются гипотезы об значимом увеличении количества партий с браком > 3 листов. Всвязи с этим нет необходимости вводить дополнительные меры контроля качества для стали марки `A` и нет необходимости снижать скорость прокатки."
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.5"
  },
  "toc": {
   "base_numbering": 1,
   "nav_menu": {},
   "number_sections": true,
   "sideBar": true,
   "skip_h1_title": false,
   "title_cell": "Table of Contents",
   "title_sidebar": "Contents",
   "toc_cell": false,
   "toc_position": {
    "height": "calc(100% - 180px)",
    "left": "10px",
    "top": "150px",
    "width": "376px"
   },
   "toc_section_display": true,
   "toc_window_display": true
  },
  "varInspector": {
   "cols": {
    "lenName": 16,
    "lenType": 16,
    "lenVar": 40
   },
   "kernels_config": {
    "python": {
     "delete_cmd_postfix": "",
     "delete_cmd_prefix": "del ",
     "library": "var_list.py",
     "varRefreshCmd": "print(var_dic_list())"
    },
    "r": {
     "delete_cmd_postfix": ") ",
     "delete_cmd_prefix": "rm(",
     "library": "var_list.r",
     "varRefreshCmd": "cat(var_dic_list()) "
    }
   },
   "types_to_exclude": [
    "module",
    "function",
    "builtin_function_or_method",
    "instance",
    "_Feature"
   ],
   "window_display": false
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
